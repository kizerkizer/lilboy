class Token{constructor(t,n){this.type=t,this.value=n}}class Tokenizer{constructor(t){this.input=t,this.currentIndex=0,this.currentLine=0}_isNewline(t){let n=t.charCodeAt(0);return 10===n||13===n||8232===n||8233===n}_isWhitespace(t){let n=t.charCodeAt(0);return 9===n||11===n||12===n||32===n||160===n||65279===n||5760===n||8192===n||8193===n||8194===n||8195===n||8196===n||8197===n||8198===n||8199===n||8200===n||8201===n||8202===n||8202===n||8239===n||8287===n||12288===n}_readPunctuator(){switch(this.input.charCodeAt(this.currentIndex)){case 33:return"!=="===this.input.substring(this.currentIndex,this.currentIndex+3)?"!==":"!="===this.input.substring(this.currentIndex,this.currentIndex+2)?"!=":"!"===this.input.substring(this.currentIndex,this.currentIndex+1)?"!":null;case 37:return"%="===this.input.substring(this.currentIndex,this.currentIndex+2)?"%=":"%"===this.input.substring(this.currentIndex,this.currentIndex+1)?"%":null;case 38:return"&="===this.input.substring(this.currentIndex,this.currentIndex+2)?"&=":"&&"===this.input.substring(this.currentIndex,this.currentIndex+2)?"&&":"&"===this.input.substring(this.currentIndex,this.currentIndex+1)?"&":null;case 40:return"("===this.input.substring(this.currentIndex,this.currentIndex+1)?"(":null;case 41:return")"===this.input.substring(this.currentIndex,this.currentIndex+1)?")":null;case 42:return"*="===this.input.substring(this.currentIndex,this.currentIndex+2)?"*=":"*"===this.input.substring(this.currentIndex,this.currentIndex+1)?"*":null;case 43:return"+="===this.input.substring(this.currentIndex,this.currentIndex+2)?"+=":"++"===this.input.substring(this.currentIndex,this.currentIndex+2)?"++":"+"===this.input.substring(this.currentIndex,this.currentIndex+1)?"+":null;case 44:return","===this.input.substring(this.currentIndex,this.currentIndex+1)?",":null;case 45:return"-="===this.input.substring(this.currentIndex,this.currentIndex+2)?"-=":"-"===this.input.substring(this.currentIndex,this.currentIndex+1)?"-":null;case 46:return"..."===this.input.substring(this.currentIndex,this.currentIndex+3)?"...":"."===this.input.substring(this.currentIndex,this.currentIndex+1)?".":null;case 47:return"/="===this.input.substring(this.currentIndex,this.currentIndex+2)?"/=":"/"===this.input.substring(this.currentIndex,this.currentIndex+1)?"/":null;case 58:return":"===this.input.substring(this.currentIndex,this.currentIndex+1)?":":null;case 59:return";"===this.input.substring(this.currentIndex,this.currentIndex+1)?";":null;case 60:return"<="===this.input.substring(this.currentIndex,this.currentIndex+2)?"<=":"<<="===this.input.substring(this.currentIndex,this.currentIndex+3)?"<<=":"<<"===this.input.substring(this.currentIndex,this.currentIndex+2)?"<<":"<"===this.input.substring(this.currentIndex,this.currentIndex+1)?"<":null;case 61:return"=>"===this.input.substring(this.currentIndex,this.currentIndex+2)?"=>":"==="===this.input.substring(this.currentIndex,this.currentIndex+3)?"===":"=="===this.input.substring(this.currentIndex,this.currentIndex+2)?"==":"="===this.input.substring(this.currentIndex,this.currentIndex+1)?"=":null;case 62:return">>>="===this.input.substring(this.currentIndex,this.currentIndex+4)?">>>=":">>>"===this.input.substring(this.currentIndex,this.currentIndex+3)?">>>":">>="===this.input.substring(this.currentIndex,this.currentIndex+3)?">>=":">>"===this.input.substring(this.currentIndex,this.currentIndex+2)?">>":">="===this.input.substring(this.currentIndex,this.currentIndex+2)?">=":">"===this.input.substring(this.currentIndex,this.currentIndex+1)?">":null;case 63:return"?"===this.input.substring(this.currentIndex,this.currentIndex+1)?"?":null;case 91:return"["===this.input.substring(this.currentIndex,this.currentIndex+1)?"[":null;case 93:return"]"===this.input.substring(this.currentIndex,this.currentIndex+1)?"]":null;case 94:return"^="===this.input.substring(this.currentIndex,this.currentIndex+2)?"^=":"^"===this.input.substring(this.currentIndex,this.currentIndex+1)?"^":null;case 95:return"_--"===this.input.substring(this.currentIndex,this.currentIndex+3)?"_--":null;case 123:return"{"===this.input.substring(this.currentIndex,this.currentIndex+1)?"{":null;case 124:return"||"===this.input.substring(this.currentIndex,this.currentIndex+2)?"||":"|="===this.input.substring(this.currentIndex,this.currentIndex+2)?"|=":"|"===this.input.substring(this.currentIndex,this.currentIndex+1)?"|":null;case 125:return"}"===this.input.substring(this.currentIndex,this.currentIndex+1)?"}":null;case 126:return"~"===this.input.substring(this.currentIndex,this.currentIndex+1)?"~":null;default:return null}}_readNumber(){let t=this.currentIndex;for(let n=this.input.length;t<n&&/[0-9]/.test(this.input[t]);)t++;return t==this.currentIndex?null:this.input.substring(this.currentIndex,t)}_isRegexFirstChar(t){return!this._isNewline(t)&&"*"!=t&&"/"!=t}_readString(){if("'"==this.input[this.currentIndex]){let t=this.input.indexOf("'",this.currentIndex+1);if(-1===t)throw new Error("Open string");return this.input.substring(this.currentIndex,t+1)}if('"'==this.input[this.currentIndex]){let t=this.input.indexOf('"',this.currentIndex+1);if(-1===t)throw new Error("Open string");return this.input.substring(this.currentIndex,t+1)}return null}_readComment(){return"/"==this.input[this.currentIndex]&&"/"==this.input[this.currentIndex+1]?this.input.substring(this.currentIndex,this.input.indexOf("\n",this.currentIndex)):null}_readMultilineComment(){return"/"==this.input[this.currentIndex]&&"*"==this.input[this.currentIndex+1]?this.input.substring(this.currentIndex,this.input.indexOf("*/",this.currentIndex)+2):null}_readRegex(){if("/"==this.input[this.currentIndex]&&this._isRegexFirstChar(this.input[this.currentIndex+1])){let t=this.currentIndex+1;for(;"/"!=this.input[t]||"\\"==this.input[t-1];){if(t>=this.input.length)throw new Error("Open regex");t++}for(;"g"==this.input[t+1]||"i"==this.input[t+1]||"m"==this.input[t+1]||"u"==this.input[t+1]||"y"==this.input[t+1];)t++;return this.input.substring(this.currentIndex,t+1)}return null}next(){t:for(;;){if(this.currentIndex>=this.input.length)return{done:!0,value:void 0};for(;this._isWhitespace(this.input[this.currentIndex]);)this.currentIndex++;for(;this._isNewline(this.input[this.currentIndex]);){this.currentIndex++,this.currentLine++;continue t}let t=this._readRegex();if(t)return this.currentIndex+=t.length,{done:!1,value:new Token("regex",t)};let n=this._readComment();if(n){this.currentIndex+=n.length;continue}let r=this._readMultilineComment();if(r){this.currentIndex+=r.length;continue}let e=this._readPunctuator();if(e)return this.currentIndex+=e.length,{done:!1,value:new Token("punctuator",e)};let i,s=this.currentIndex;for(let t=this.input.length;s<t;)if(s==this.currentIndex){if(!/[a-zA-Z]/.test(this.input[s]))break;s++}else{if(!/[0-9a-zA-Z]/.test(this.input[s]))break;s++}if(i=s==this.currentIndex?null:this.input.substring(this.currentIndex,s))return this.currentIndex+=i.length,{done:!1,value:new Token("identifier",i)};let u=this._readNumber();if(u)return this.currentIndex+=u.length,{done:!1,value:new Token("number",u)};let h=this._readString();if(h)return this.currentIndex+=h.length,{done:!1,value:new Token("string",h)}}}}module.exports=(t=>{let n=new Tokenizer(t);return{[Symbol.iterator]:()=>({next:()=>n.next()})}}),module.exports.Tokenizer=Tokenizer;